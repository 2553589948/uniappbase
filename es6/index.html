<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>es6常用的24个方法来解决实际开发的js问题</title>
</head>
<body>
    <script>
        // 如何隐藏所有指定的元素(隐藏页面上所有的<img>元素)
        const hide = (el) => Array.from(el).forEach(e => (e.style.display = 'none'))
        hide(document.querySelectorAll('img'))

        // 如何获取元素中的所有图像
        const getImages = (el, includeDuplicates = false) => {
            const images = [...el.getElementsByTagName('img')].map(img => img.getAttribute('src'))
            return includeDuplicates ? images : [...new Set(images)]
        }
        // includeDuplicates为false时表示需要去重
        getImages(document, false)
        getImages(document, true)

        // 如何判断设备是台式机还是手机设备
        const detectDeviceType = () =>
            /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
                ? 'Mobile'
                : 'Desktop'
        detectDeviceType()

        // 时间格式转化
        function getDateDiff2(dateTimeStamp) {
            // 时间字符串转时间戳
            var timestamp = new Date(dateTimeStamp).getTime()
            
            var minute = 1000 * 60
            var hour = minute * 60
            var day = hour * 24
            var halfamonth = day * 15
            var month = day * 30
            var year = day * 365
            var now = new Date().getTime()
            var diffValue = now - timestamp
            var result
            if (diffValue < 0) {
                return
            }
            var yearC = diffValue / year
            var monthC = diffValue / month
            var weekC = diffValue / (7 * day)
            var dayC = diffValue / day
            var hourC = diffValue / hour
            var minC = diffValue / minute
            if (yearC >= 1) {
                result = "" + parseInt(yearC) + "年前"
            } else if (monthC >= 1) {
                result = "" + parseInt(monthC) + "月前"
            } else if (weekC >= 1) {
                result = "" + parseInt(weekC) + "周前"
            } else if (dayC >= 1) {
                result = "" + parseInt(dayC) + "天前"
            } else if (hourC >= 1) {
                result = "" + parseInt(hourC) + "小时前"
            } else if (minC >= 1) {
                result = "" + parseInt(minC) + "分钟前"
            } else
                result = "刚刚"
            return result
        }

        console.log(getDateDiff2('2018-12-5'))

        function getDateDiff(timestamp) {
            
            var minute = 1000 * 60
            var hour = minute * 60
            var day = hour * 24
            var halfamonth = day * 15
            var month = day * 30
            var year = day * 365
            var now = new Date().getTime()
            var diffValue = now - timestamp
            var result
            if (diffValue < 0) {
                return
            }
            var yearC = diffValue / year
            var monthC = diffValue / month
            var weekC = diffValue / (7 * day)
            var dayC = diffValue / day
            var hourC = diffValue / hour
            var minC = diffValue / minute
            if (yearC >= 1) {
                result = "" + parseInt(yearC) + "年前"
            } else if (monthC >= 1) {
                result = "" + parseInt(monthC) + "月前"
            } else if (weekC >= 1) {
                result = "" + parseInt(weekC) + "周前"
            } else if (dayC >= 1) {
                result = "" + parseInt(dayC) + "天前"
            } else if (hourC >= 1) {
                result = "" + parseInt(hourC) + "小时前"
            } else if (minC >= 1) {
                result = "" + parseInt(minC) + "分钟前"
            } else
                result = "刚刚"
            return result
        }

        console.log(getDateDiff(1591510945*1000))
    </script>
</body>
</html>